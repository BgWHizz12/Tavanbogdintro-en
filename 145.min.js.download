(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{153:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e),n.d(e,"ContentResizable",(function(){return u}));var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,i,c=s(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,t,e)).isTicking_=!1,n.isFirstCalculation_=!0,n.blockCssClass_=n.config_.blockCssClass,n.lastKnownScrollPosition_=0,n.stopDistance_=0,n.currentScale_=1,n.isScrollingDown_=!0,n.image_=null,n.content_=null,n.initialPositionY_=100,n.scalesPerBreakpoint_=n.config_.scalesPerBreakpoint,n.trackElement_=n.trackElement_.bind(a(n)),n.untrackElement_=n.untrackElement_.bind(a(n)),n.handleScroll_=n.handleScroll_.bind(a(n)),n.refreshStopDistance_=n.refreshStopDistance_.bind(a(n)),n}return e=l,(n=[{key:"initialize_",value:function(){var t=this.store_.state.currentScrollPosition;this.image_=this.element.querySelector(".".concat(this.blockCssClass_,"__image-wrapper")),this.content_=this.element.querySelector(".".concat(this.blockCssClass_,"__content-wrapper")),this.refreshStopDistance_(),this.handleScroll_(t),this.subscriptions_=[[this.topics_.BREAKPOINT_CHANGE,this.refreshStopDistance_]],this.trackComponentVisibility_(this.trackElement_,this.untrackElement_,{rootMargin:"25% 0% 25% 0%"},!1)}},{key:"handleScroll_",value:function(t){this.isScrollingDown_=this.store_.state.isScrollingDown,this.lastKnownScrollPosition_=t,this.resizeAndScale_()}},{key:"resizeAndScale_",value:function(){var t=this.getAnimatedDistance_();if(this.shouldAnimate_(t)||this.isFirstCalculation_){this.currentScale_=this.getScaleAmount_(t),this.currentPositionY=this.getCurrentPositionY_(t),this.image_.style.setProperty("will-change","transform"),this.content_.style.setProperty("will-change","transform");var e=this.currentScale_>1?1:this.currentScale_;this.image_.style.setProperty("transform","scale(".concat(e,") translate3d(0, 0, 0)")),this.content_.style.setProperty("transform","translate3d(0,".concat(this.currentPositionY,"px, 0)"))}else t<0&&(this.image_.style.removeProperty("will-change"),this.content_.style.removeProperty("will-change"),this.image_.style.setProperty("transform","scale(1)"),this.content_.style.setProperty("transform","translate3d(0, ".concat(this.initialPositionY_,"px, 0)")));this.isTicking_=!1,this.isFirstCalculation_=!1}},{key:"getCurrentPositionY_",value:function(t){var e=t/this.stopDistance_*this.initialPositionY_;return Math.floor(this.initialPositionY_-e)}},{key:"getScaleAmount_",value:function(t){return 1-this.scalesPerBreakpoint_[this.store_.state.currentBreakpoint]*(t/this.stopDistance_)}},{key:"shouldAnimate_",value:function(t){return t>=0&&t<=this.stopDistance_}},{key:"getAnimatedDistance_",value:function(){var t=Math.round(this.lastKnownScrollPosition_-this.element.offsetTop);return t>this.stopDistance_?this.stopDistance_:t>0?t:t<0?0:void 0}},{key:"trackElement_",value:function(){this.store_.subscribe([[this.topics_.SCROLL_POSITION_CHANGE,this.handleScroll_]]),this.refreshStopDistance_()}},{key:"untrackElement_",value:function(){this.store_.unsubscribe(this.topics_.SCROLL_POSITION_CHANGE,this.handleScroll_)}},{key:"refreshStopDistance_",value:function(){this.stopDistance_=2*this.image_.offsetHeight/3*.5}}])&&o(e.prototype,n),i&&o(e,i),l}(n(3).BaseComponent)}}]);